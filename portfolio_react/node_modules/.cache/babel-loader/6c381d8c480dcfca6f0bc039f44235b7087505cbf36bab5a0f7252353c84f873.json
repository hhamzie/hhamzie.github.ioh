{"ast":null,"code":"import React,{useEffect,useRef,useState}from'react';import{getDocument,GlobalWorkerOptions}from'pdfjs-dist';import'pdfjs-dist/web/pdf_viewer.css';import'./PDFViewer.css';import{jsx as _jsx}from\"react/jsx-runtime\";GlobalWorkerOptions.workerSrc=\" //https://cdnjs.cloudflare.com/ajax/libs/pdf.js/3.11.174/pdf.worker.min.js\";const PDFViewer=_ref=>{let{pdfUrl}=_ref;const canvasRef=useRef(null);const[error,setError]=useState(null);useEffect(()=>{let isCancelled=false;//comment\nconsole.log(\"Loading PDF from URL: \".concat(pdfUrl));const loadingTask=getDocument(pdfUrl);loadingTask.promise.then(pdf=>{if(!isCancelled){console.log('PDF loaded:',pdf);renderPage(pdf,1);// Render the first page only\n}}).catch(error=>{if(!isCancelled){console.error('Error loading PDF:',error);setError('Error loading PDF');}});// Cleanup function to set the isCancelled flag to true\nreturn()=>{isCancelled=true;};},[pdfUrl]);const renderPage=(pdf,pageNumber)=>{pdf.getPage(pageNumber).then(page=>{console.log('Page loaded:',page);const scale=1.5;const viewport=page.getViewport({scale});const canvas=canvasRef.current;if(!canvas){console.error('Canvas not found');setError('Canvas element not found');return;}console.log('Canvas element found:',canvas);// Log the canvas element\nconst context=canvas.getContext('2d');if(!context){console.error('Canvas context not found');setError('Canvas context not found');return;}console.log('Canvas context found:',context);// Log the canvas context\ncanvas.height=viewport.height;canvas.width=viewport.width;const renderContext={canvasContext:context,viewport:viewport};page.render(renderContext).promise.then(()=>{console.log('Page rendered');}).catch(error=>{console.error('Error rendering page:',error);setError('Error rendering page');});}).catch(error=>{console.error('Error loading page:',error);setError('Error loading page');});};if(error){return/*#__PURE__*/_jsx(\"div\",{className:\"pdf-viewer\",children:error});}return/*#__PURE__*/_jsx(\"div\",{className:\"pdf-viewer\",children:/*#__PURE__*/_jsx(\"canvas\",{ref:canvasRef})});};export default PDFViewer;","map":{"version":3,"names":["React","useEffect","useRef","useState","getDocument","GlobalWorkerOptions","jsx","_jsx","workerSrc","PDFViewer","_ref","pdfUrl","canvasRef","error","setError","isCancelled","console","log","concat","loadingTask","promise","then","pdf","renderPage","catch","pageNumber","getPage","page","scale","viewport","getViewport","canvas","current","context","getContext","height","width","renderContext","canvasContext","render","className","children","ref"],"sources":["/Users/hamzehhammad/Documents/02_PersonalProjects/hhamzie.github.io/portfolio_react/src/components/PDFViewer.js"],"sourcesContent":["import React, { useEffect, useRef, useState } from 'react';\nimport { getDocument, GlobalWorkerOptions } from 'pdfjs-dist';\nimport 'pdfjs-dist/web/pdf_viewer.css';\nimport './PDFViewer.css';\n\n\n\n\nGlobalWorkerOptions.workerSrc = ` //https://cdnjs.cloudflare.com/ajax/libs/pdf.js/3.11.174/pdf.worker.min.js`;\n\nconst PDFViewer = ({ pdfUrl }) => {\n  const canvasRef = useRef(null);\n  const [error, setError] = useState(null);\n  \n\n  useEffect(() => {\n    let isCancelled = false;\n//comment\n    console.log(`Loading PDF from URL: ${pdfUrl}`);\n    const loadingTask = getDocument(pdfUrl);\n\n    loadingTask.promise\n      .then((pdf) => {\n        if (!isCancelled) {\n          console.log('PDF loaded:', pdf);\n          renderPage(pdf, 1); // Render the first page only\n        }\n      })\n      .catch((error) => {\n        if (!isCancelled) {\n          console.error('Error loading PDF:', error);\n          setError('Error loading PDF');\n        }\n      });\n\n    // Cleanup function to set the isCancelled flag to true\n    return () => {\n      isCancelled = true;\n    };\n  }, [pdfUrl]);\n\n  const renderPage = (pdf, pageNumber) => {\n    pdf.getPage(pageNumber)\n      .then((page) => {\n        console.log('Page loaded:', page);\n        const scale = 1.5;\n        const viewport = page.getViewport({ scale });\n        const canvas = canvasRef.current;\n        if (!canvas) {\n          console.error('Canvas not found');\n          setError('Canvas element not found');\n          return;\n        }\n        console.log('Canvas element found:', canvas); // Log the canvas element\n        const context = canvas.getContext('2d');\n        if (!context) {\n          console.error('Canvas context not found');\n          setError('Canvas context not found');\n          return;\n        }\n        console.log('Canvas context found:', context); // Log the canvas context\n        canvas.height = viewport.height;\n        canvas.width = viewport.width;\n        const renderContext = {\n          canvasContext: context,\n          viewport: viewport,\n        };\n        page.render(renderContext).promise.then(() => {\n          console.log('Page rendered');\n        }).catch((error) => {\n          console.error('Error rendering page:', error);\n          setError('Error rendering page');\n        });\n      })\n      .catch((error) => {\n        console.error('Error loading page:', error);\n        setError('Error loading page');\n      });\n  };\n\n  if (error) {\n    return <div className=\"pdf-viewer\">{error}</div>;\n  }\n\n  return (\n    <div className=\"pdf-viewer\">\n      <canvas ref={canvasRef}></canvas>\n    </div>\n  );\n};\n\nexport default PDFViewer;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}